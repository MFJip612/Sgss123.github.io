webpackJsonpVirus_1_116_1__name_([1],{493:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=a(8),c=i(l),u=a(12),d=i(u),h=a(64),f=i(h),p=(a(571),a(209)),m=a(578),_=a(52),b=a(22),g=void 0,y=function(e){function t(){var e,a,i,s;r(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=i=n(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),i.handleSelectCityOld=function(e,t){var a=i.props,r=a.root,n=a.provinceName,s=a.cityName;""===e&&""===t?n||s?location.href=(0,b.makeCityUrl)():r.setState({showCityFilter:!1}):location.href=(0,b.makeCityUrl)(e,t)},i.handleSelectCity=function(e,t){var a=i.props,r=a.root,n=a.provinceName,s=a.cityName,o=a.isRegionalPage,l="";if(""===e&&""===t?(n||s)&&(l=(0,b.makeCityUrl)()):l=(0,b.makeCityUrl)(e,t),!l)return!1;if(!o)return location.href=l,r&&r.setState&&r.setState({showCityFilter:!1}),!0;var c=window.location,u=c.origin,d=c.pathname,h=u+d+l;window.location.replace(h)},s=a,n(i,s)}return s(t,e),o(t,[{key:"componentDidMount",value:function(){!_.enableSnapShare&&f.default.isBaiduBox()&&a.e(42).then(a.bind(null,581)).then(function(e){g=e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.rootProps,i=t.rootState,r=(t.partner,t.provinceName,t.cityName,t.isRegionalPage,t.isCityPage,t.isForeignPage,a.share);a.mapLastUpdatedTime,a.mapSrc,a.caseList,a.caseOutsideList,a.summaryDataIn,i.mapImgSrc,i.currentMapTab;return c.default.createElement("div",null,c.default.createElement(m.VirusBaseBall,{showToast:function(t){return e.props.showToast(t)}}),this.renderShare(r),this.renderCityFilter(),this.renderBackToTop())}},{key:"renderShare",value:function(e){var t=this.props.styles,a=navigator.userAgent.toLowerCase(),i=a.indexOf("baiduboxapp")+1,r=a.split("baiduboxapp/")[1]&&parseInt(a.split("baiduboxapp/")[1],10);if(i&&r>=11&&(e.title||e.image)&&!_.isDuros&&!_.enableSnapShare){var n=function(){g&&g.open({type:e.type,title:e.title,content:e.content,url:e.url,icon:e.icon,imageUrl:e.image})};return c.default.createElement("div",{className:t.shareBtnWrap},c.default.createElement("button",{className:t.shareBtn,onClick:n},"分享动态"))}}},{key:"renderCityFilter",value:function(){var e=this.props,t=e.root,a=e.rootProps,i=e.rootState,r=e.provinceName,n=e.cityName,s=e.isRegionalPage,o=a.caseList,l=a.caseOutsideList,u=i.showCityFilter,d=o.concat(l);return u&&c.default.createElement(p.CityFilter,{province:s?r:"",city:s?n:"",caseList:d,chinaCaseList:o,onClose:function(){t.setState({showCityFilter:!1})},onSelect:this.handleSelectCity})}},{key:"renderBackToTop",value:function(){var e=this.props,t=e.styles,a=e.rootState;return c.default.createElement("i",{className:(0,d.default)(t.backToTop,a.showBackToTop?"":t.hide),onClick:function(){window.scrollTo(0,0)}})}}]),t}(l.Component);t.default=y},571:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function o(e,t,a){var i=document.createElement("canvas");return i.width=t||e.width,i.height=a||e.height,i.getContext("2d").drawImage(e,0,0,i.width,i.height),i.toDataURL()}function l(e){var t=new Image;return t.crossOrigin="",t.src=e,new y.default(function(a,i){e?(t.onload=function(){a(o(t))},t.onerror=function(){i()}):i()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Share=void 0;var c=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),u=a(8),d=i(u),h=a(12),f=i(h),p=a(572),m=i(p),_=a(112),b=i(_),g=a(114),y=i(g),S=a(80),w=a(52),v=a(22),k={displayButton:1,displayShare:2,displayLoading:3},x="https://mms-res.cdn.bcebos.com/mms-res/voicefe/captain/images/7a0a46ee57db3a595c9fd068671dc311.png?size=720*1133",B="https://mms-res.cdn.bcebos.com/mms-res/voicefe/captain/images/cbb8dd9a15c991fe7061f8ee14063c35.png?size=64*3",C="https://mms-res.cdn.bcebos.com/mms-res/voicefe/captain/images/a77afc15d0c4b9d8045a2baa2d57b00a.png?size=64*3",V=["拒绝野味，管住嘴","不传谣，不信谣","勤洗手，戴口罩","少出门，不聚集","坚持战疫，共渡难关","保持理性，科学防疫"],E=void 0;t.Share=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.backupSrc="https://mms-res.cdn.bcebos.com/mms-res/voicefe/captain/images/de8211cfeffab9addf686a6fbd51ce7b.png?size=1050*803",a.tipText=document.body.clientWidth>700?"":"长按保存图片",a.state={state:0,count:0,bgImgData:"",shareDividerLeftImgData:"",shareDividerRightImgData:"",backupData:"",shareImageData:"",sum:{},cityName:"",name:""},l(x).then(function(e){a.setState({bgImgData:e}),a.fetch()}),l(B).then(function(e){a.setState({shareDividerLeftImgData:e})}),l(C).then(function(e){a.setState({shareDividerRightImgData:e})}),v.globalComponentMethods.snapShare=function(e,t,i){t=window.snapShare.selectedName||t;var r={name:t};w.enableShareCityInProvinceMap&&i&&t!==i?r.cityName=i:r.cityName="",a.setState(r,function(){var e=document.querySelector(".virus-map-tips");e&&e.classList.add("hide"),a.getSumData(),a.switch(k.displayLoading).then(function(){a.state.name="",a.state.cityName="",e&&e.classList.remove("hide")})})},window.snapShare=v.globalComponentMethods.snapShare,a}return s(t,e),c(t,[{key:"componentDidMount",value:function(){a.e(43).then(a.bind(null,577)).then(function(e){E=e})}},{key:"fetch",value:function(){var e=this;(0,b.default)("https://sop-pae.baidu.com/sop/api/epidemic?type=0",{jsonpCallback:"cb"}).then(function(e){return e.json()}).then(function(t){try{e.setState({count:(0,S.toThousands)(t.data.epidemic)}),e.setState({state:k.displayButton})}catch(e){console.log("err",e)}})}},{key:"switch",value:function(e){switch(e){case k.displayLoading:return this.setState({state:e}),this.snapAndShow();case k.displayButton:return this.setState({state:k.displayButton}),y.default.resolve()}return y.default.resolve()}},{key:"snapAndShow",value:function(){var e=this;return this.snapMap().then(function(){var t=window.scrollY;window.scrollTo(0,0),document.querySelector("#share-fill")?document.querySelector("#share-fill").src=e.state.backupData:e.setState({state:k.displayLoading});var a={logging:!1,width:248.5,height:390.5};window.devicePixelRatio<2&&(a.scale=3),E&&E(document.querySelector("#share-frame"),a).then(function(t){e.setState({shareImageData:t.toDataURL("image/jpeg",.9)}),e.setState({state:k.displayShare})}),window.scrollTo(0,t)})}},{key:"snapMap",value:function(){var e=this;return new y.default(function(t,a){if(e.state.name){var i=v.globalComponentMethods.getEchartsMap();if(i&&i.length>5e4)return e.state.backupData=i,void t()}e.props.mapImgSrc&&e.props.mapImgSrc.length>5e4&&(e.state.backupData=e.props.mapImgSrc);var r=0===e.props.currentMapTab?"#virusMapArea1":"#virusMapArea2";if(document.querySelector("#virus-map").childElementCount){var n=window.scrollY;window.scrollTo(0,0);var s=document.getElementsByClassName("virus-map-tips-more"),o=document.getElementsByClassName("pieces-content");if(s&&s.length)for(var c=0;c<s.length;c++)s[c].classList.add("hide");if(o&&o.length)for(var c=0;c<o.length;c++)o[c].style.backgroundColor="transparent";return E&&E(document.querySelector(r),{logging:!1}).then(function(a){if(s&&s.length)for(var i=0;i<s.length;i++)s[i].classList.remove("hide");if(o&&o.length)for(var i=0;i<o.length;i++)o[i].style.backgroundColor="#f8f9fa";var r=a.toDataURL("image/jpeg",1);r.length>=5e4&&(e.state.backupData=r),t()}),void window.scrollTo(0,n)}e.state.backupData?t():(document.querySelector("#virus-map-img")&&(e.backupSrc=document.querySelector("#virus-map-img").src),l(e.backupSrc).then(function(a){e.state.backupData=a,t()}))})}},{key:"clickMask",value:function(){var e=this;setTimeout(function(){e.state.state===k.displayLoading&&e.switch(k.displayButton)},1e3)}},{key:"getSumData",value:function(){var e=this.state.sum,t=this.state.name||this.props.selectedName,a=this.state.cityName||"";e.name!==(a||t)&&("全国"===t?e=this.props.summaryDataIn:w.enableCityPage&&(e=(0,v.getCurrentCityData)(t,a||t,this.props.caseList)),e.name=a||t,this.state.sum=e)}},{key:"render",value:function(){var e=this;this.getSumData();var t=this.state,a=t.count,i=t.state,r=t.bgImgData,n=t.shareDividerLeftImgData,s=t.shareDividerRightImgData,o=this.state.sum,l=this.props,c=l.mapLastUpdatedTime,u=l.backupSrc,h=l.isRegionalPage;this.backupSrc=u||this.backupSrc;var p=this.state.cityName||this.state.name||this.props.selectedName;if(w.enableShareCityInProvinceMap&&this.state.cityName&&this.state.name&&-1!==w.municipalityNameList.indexOf(this.state.name)&&(p=this.state.name+this.state.cityName),0===a)return null;var _=V[Math.floor(5.99*Math.random())];return d.default.createElement("div",null,d.default.createElement("div",{style:{display:i===k.displayButton?"block":"none"},className:m.default.shareButton,"data-click":"{'act':'b_share_btn_click'}","data-type":"btn",onClick:function(){w.enableShareCityInProvinceMap&&e.props.cityName&&(e.state.cityName=e.props.cityName,e.getSumData()),e.switch(k.displayLoading).then(function(){e.state.cityName=""})}},d.default.createElement("div",{className:m.default.shareTitle},"分享实时动态"),d.default.createElement("div",{className:m.default.shareCountWrapper},d.default.createElement("div",{className:m.default.shareCount},"共抗疫情 传递爱"))),d.default.createElement("div",{className:m.default.shareMask,style:{display:i!==k.displayButton?"block":"none"},onClick:function(){e.clickMask()}}),d.default.createElement("span",{className:m.default.shareLoader,style:{display:i!==k.displayButton?"block":"none"}}),d.default.createElement("div",{id:"share-info",className:m.default.shareInfo,style:{display:i===k.displayShare?"block":"none"}},d.default.createElement("span",{className:m.default.shareClose,onClick:function(){e.switch(k.displayButton)}}),d.default.createElement("img",{src:this.state.shareImageData}),d.default.createElement("span",{className:m.default.shareTip},this.tipText)),d.default.createElement("div",{id:"share-frame",className:m.default.shareFrame},d.default.createElement("div",{className:m.default.shareTitle},d.default.createElement("img",{className:m.default.shareDividerLeft,src:n}),d.default.createElement("div",null,p,"疫情实时追踪"),d.default.createElement("img",{className:m.default.shareDividerRight,src:s})),d.default.createElement("div",{className:m.default.shareTime},"截止 ",c," ",p),d.default.createElement("img",{className:m.default.shareInfoImg,src:r}),d.default.createElement("div",{className:(0,f.default)(m.default.shareSum,m.default.shareNum)},d.default.createElement("span",{style:{color:"#ff6a57"}},(0,v.normalizeCaseCount)(o.curConfirm)),d.default.createElement("span",{style:{color:"#e83132"}},(0,v.normalizeCaseCount)(o.confirmed)),d.default.createElement("span",{style:{color:"#10aeb5"}},(0,v.normalizeCaseCount)(o.crued||o.cured)),d.default.createElement("span",{style:{color:"#4d5054"}},(0,v.normalizeCaseCount)(o.died))),d.default.createElement("div",{className:m.default.shareSum,style:{top:"97.25px"}},d.default.createElement("span",null,"现有确诊"),d.default.createElement("span",null,"累计确诊"),d.default.createElement("span",null,"累计治愈"),d.default.createElement("span",null,"累计死亡")),d.default.createElement("img",{id:"share-fill",className:(0,f.default)(m.default.shareMap,h?m.default.shareProvinceMap:""),src:this.state.backupData}),d.default.createElement("div",{className:(0,f.default)(m.default.shareBase,m.default.sharePromise)},_),d.default.createElement("div",{className:(0,f.default)(m.default.shareBase,m.default.shareCount)},"共 ",d.default.createElement("span",null,a)," 人次关注疫情")))}}]),t}(u.Component);window.Promise=window.Promise||y.default},572:function(e,t,a){var i=a(573);"string"==typeof i&&(i=[[e.i,i,""]]);a(447)(i,{});i.locals&&(e.exports=i.locals)},573:function(e,t,a){t=e.exports=a(446)(),t.push([e.i,".Share_1-116-1_344UNA{position:fixed;width:11.625rem;height:4.0625rem;bottom:.3125rem;right:.5625rem;background-image:url("+a(574)+");background-size:100%;background-repeat:no-repeat;color:#fff;cursor:pointer;z-index:99929999}.Share_1-116-1_344UNA .Share_1-116-1_3l255w{position:absolute;top:.875rem;left:3.5625rem;font-weight:700;font-size:.9375rem;line-height:100%}.Share_1-116-1_344UNA .Share_1-116-1_1quoJy{position:absolute;top:2.0625rem;left:3.5625rem}.Share_1-116-1_344UNA .Share_1-116-1_2aQnDW{-webkit-transform:scale(.9167);-ms-transform:scale(.9167);transform:scale(.9167);margin-left:-.5rem;font-size:.6875rem;width:12rem;line-height:100%}.Share_1-116-1_2i0TxT{position:fixed;top:-10rem;left:0;width:100%;height:300rem;opacity:.65;background:#000;z-index:99999990}.Share_1-116-1_vu3QyB{position:fixed;top:50%;left:50%;z-index:99999991;width:4rem;height:4rem;margin:-5rem 0 0 -2rem;background:url("+a(575)+');background-size:cover;background-repeat:no-repeat}.Share_1-116-1_vu3QyB:after{color:#fff;content:"\\6B63\\5728\\52A0\\8F7D...";width:14rem;text-align:center;display:block;margin-left:-4.8rem;margin-top:4.5rem;opacity:.7}.Share_1-116-1_2LidAD{position:fixed;width:20.6875rem;height:32.5417rem;left:50%;top:50%;margin:-17.3rem 0 0 -10.3438rem;z-index:99999992;background:#0d8890}.Share_1-116-1_2LidAD .Share_1-116-1_1_JGcP{position:absolute;top:.4375rem;right:.4375rem;display:block;width:1.625rem;height:1.825rem;background:url('+a(576)+");background-size:100%;z-index:99999995;background-repeat:no-repeat}.Share_1-116-1_2LidAD .Share_1-116-1_3RhVgd{position:absolute;display:block;width:10rem;left:50%;margin-left:-5rem;bottom:-1.5rem;font-size:.875rem;line-height:100%;color:#fff;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}.Share_1-116-1_2LidAD img{width:20.6875rem;height:32.5417rem;border-radius:.3125rem}.Share_1-116-1_3eqi2V{position:absolute;top:0;left:-1000px;z-index:1}.Share_1-116-1_3eqi2V .Share_1-116-1_3OeQ7x{display:block;width:248.5px;height:390.5px;border:0 solid}.Share_1-116-1_3eqi2V .Share_1-116-1_3l255w{position:absolute;top:31.25px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;width:100%;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;font-size:9px;color:#d5fff6;letter-spacing:1px;font-weight:700}.Share_1-116-1_3eqi2V .Share_1-116-1_2V_Nfb,.Share_1-116-1_3eqi2V .Share_1-116-1_1138ov{width:16px;height:1px}.Share_1-116-1_3eqi2V .Share_1-116-1_2V_Nfb{margin-right:4.5px}.Share_1-116-1_3eqi2V .Share_1-116-1_1138ov{margin-left:4.5px}.Share_1-116-1_3eqi2V .Share_1-116-1_16UHz_{position:absolute;top:59.25px;left:18.75px;font-size:9.75px;color:#333;line-height:10.15px}.Share_1-116-1_3eqi2V .Share_1-116-1_3ug-h8{position:absolute;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;top:76.75px;left:11.25px;width:225.75px;font-size:11.25px;line-height:100%;text-align:center}.Share_1-116-1_3eqi2V .Share_1-116-1_3ug-h8 span{display:inline-block;width:75.25px}.Share_1-116-1_3eqi2V .Share_1-116-1_4ZHj7V{font-family:PingFangSC-Medium;font-size:14.25px;line-height:100%;font-weight:700;color:#10aeb5}.Share_1-116-1_3eqi2V .Share_1-116-1_3FqHKc{position:absolute;left:0;line-height:100%;text-align:center;color:#fff;width:100%}.Share_1-116-1_3eqi2V .Share_1-116-1_e8-WjC{top:293.75px;font-size:14.25px}.Share_1-116-1_3eqi2V .Share_1-116-1_2aQnDW{top:324.5px;font-size:9.75px}.Share_1-116-1_3eqi2V .Share_1-116-1_2aQnDW span{color:#e6e900;padding:0 3px}.Share_1-116-1_3eqi2V .Share_1-116-1_zZSRfz{position:absolute;top:113.75px;left:0;right:0;margin:auto;width:186px;height:142.25px}.Share_1-116-1_3eqi2V .Share_1-116-1_1Etxde{width:123.4px}.Share_1-116-1_3eqi2V .Share_1-116-1_1Yj2X2{position:absolute;right:13.25px;bottom:43px;width:10.75px;height:35.75px}@media screen and (max-height:520px){.Share_1-116-1_2LidAD{-webkit-transform:scale(.8);-ms-transform:scale(.8);transform:scale(.8)}}@media screen and (min-height:700px){.Share_1-116-1_2LidAD{-webkit-transform:scale(1.2);-ms-transform:scale(1.2);transform:scale(1.2)}}@media screen and (min-height:820px){.Share_1-116-1_2LidAD{-webkit-transform:scale(1.5);-ms-transform:scale(1.5);transform:scale(1.5)}}@media screen and (max-width:600px){.Share_1-116-1_2LidAD{-webkit-transform:none;-ms-transform:none;transform:none}}",""]),t.locals={"share-button":"Share_1-116-1_344UNA",shareButton:"Share_1-116-1_344UNA","share-title":"Share_1-116-1_3l255w",shareTitle:"Share_1-116-1_3l255w","share-count-wrapper":"Share_1-116-1_1quoJy",shareCountWrapper:"Share_1-116-1_1quoJy","share-count":"Share_1-116-1_2aQnDW",shareCount:"Share_1-116-1_2aQnDW","share-mask":"Share_1-116-1_2i0TxT",shareMask:"Share_1-116-1_2i0TxT","share-loader":"Share_1-116-1_vu3QyB",shareLoader:"Share_1-116-1_vu3QyB","share-info":"Share_1-116-1_2LidAD",shareInfo:"Share_1-116-1_2LidAD","share-close":"Share_1-116-1_1_JGcP",shareClose:"Share_1-116-1_1_JGcP","share-tip":"Share_1-116-1_3RhVgd",shareTip:"Share_1-116-1_3RhVgd","share-frame":"Share_1-116-1_3eqi2V",shareFrame:"Share_1-116-1_3eqi2V","share-info-img":"Share_1-116-1_3OeQ7x",shareInfoImg:"Share_1-116-1_3OeQ7x","share-divider-left":"Share_1-116-1_2V_Nfb",shareDividerLeft:"Share_1-116-1_2V_Nfb","share-divider-right":"Share_1-116-1_1138ov",shareDividerRight:"Share_1-116-1_1138ov","share-time":"Share_1-116-1_16UHz_",shareTime:"Share_1-116-1_16UHz_","share-sum":"Share_1-116-1_3ug-h8",shareSum:"Share_1-116-1_3ug-h8","share-num":"Share_1-116-1_4ZHj7V",shareNum:"Share_1-116-1_4ZHj7V","share-base":"Share_1-116-1_3FqHKc",shareBase:"Share_1-116-1_3FqHKc","share-promise":"Share_1-116-1_e8-WjC",sharePromise:"Share_1-116-1_e8-WjC","share-map":"Share_1-116-1_zZSRfz",shareMap:"Share_1-116-1_zZSRfz","share-province-map":"Share_1-116-1_1Etxde",shareProvinceMap:"Share_1-116-1_1Etxde","share-qrcode":"Share_1-116-1_1Yj2X2",shareQrcode:"Share_1-116-1_1Yj2X2"}},574:function(e,t){e.exports="//mms-res.cdn.bcebos.com/mms-res/voicefe/captain/mola/Virus/1.116.1/assets/share-btn-small.2ec24b0.png"},575:function(e,t){e.exports="//mms-res.cdn.bcebos.com/mms-res/voicefe/captain/mola/Virus/1.116.1/assets/loading.c4b5965.svg"},576:function(e,t){e.exports="//mms-res.cdn.bcebos.com/mms-res/voicefe/captain/mola/Virus/1.116.1/assets/share-close.08f0789.png"},578:function(e,t,a){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.VirusBaseBall=void 0;var o=function(){function e(e,t){for(var a=0;a<t.length;a++){var i=t[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,a,i){return a&&e(t.prototype,a),i&&e(t,i),t}}(),l=a(8),c=i(l),u=a(579),d=i(u),h=a(22),f=a(64),p=a(200),m=i(p),_=a(112),b=i(_);t.VirusBaseBall=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={title:"添加到桌面",subTitle:"一手疫情最新进展",jumpUrl:(0,f.isIOS)()?"https://motion.baidu.com/activity/widget/ios":"https://mbd.baidu.com/baiduapp/widget/android",startY:0,ballStatus:"",closeBaseBall:!1,showComponent:(0,f.isAndroid)()&&a.checkAndroidVersion()&&(0,f.isBaiduBox)()&&!(0,f.isBaiduBoxJisu)(),openWidgetId:0,hasOpenWidget:!0},a}return s(t,e),o(t,[{key:"render",value:function(){var e=this;return!this.state.showComponent||this.state.closeBaseBall||this.state.hasOpenWidget?null:c.default.createElement("div",{id:"base-ball",className:[d.default.baseBall,"hide"===this.state.ballStatus?d.default.ballHide:"","expand"===this.state.ballStatus?d.default.ballShow:"","close"===this.state.ballStatus?d.default.closeBall:""].join(" "),onClick:function(){e.goToGuide()}},c.default.createElement("div",{className:d.default.logo}),c.default.createElement("div",{className:d.default.content},c.default.createElement("div",{className:d.default.title},this.state.title),c.default.createElement("div",{className:d.default.subTitle},this.state.subTitle)),c.default.createElement("div",{className:d.default.close,onClick:function(t){e.closeBaseBall(t)}},c.default.createElement("div",{className:d.default.icon})))}},{key:"componentWillMount",value:function(){var e=this;this.handleOpenWidget(),this.throttle=(0,h.throttle)(function(){e.handleShrink(),e.handleExtend()},200),window.addEventListener("scroll",this.throttle)}},{key:"handleShrink",value:function(){if(!this.state.ballStatus||"expand"===this.state.ballStatus){var e=window.scrollY;Math.abs(e-this.state.startY)>18&&this.setState({ballStatus:"hide"})}}},{key:"handleExtend",value:function(){var e=this;clearTimeout(this.scrollEndDelayTimer),"expand"!==this.state.ballStatus&&(this.scrollEndDelayTimer=setTimeout(function(){e.setState({ballStatus:"expand",startY:window.scrollY})},1e3))}},{key:"goToGuide",value:function(){var e=this;if(window._CaptainLog&&window._CaptainLog.send({act:"widget_ball_click"}),m.default.canIUse("search.addOpenWidget")){var t=(0,h.getUrlCityInfo)();m.default.search.addOpenWidget({config:{statistic:{from:"epidemic_landing_page"},params:{province:t.province,city:t.city}},openWidgetId:this.state.openWidgetId,from:"alading",success:function(t){t&&0!==t.status?window.location.href=e.state.jumpUrl:(e.setState({hasOpenWidget:!0}),e.props.showToast("添加成功，请到桌面查看"))},fail:function(t){if(t){var a=t&&t.status;a&&[1006,1005].includes(a)?e.props.showToast("添加失败，请再试一次"):1003!==a&&(window.location.href=e.state.jumpUrl)}}})}else window.location.href=this.state.jumpUrl}},{key:"closeBaseBall",value:function(e){var t=this;e.stopPropagation(),this.setState({ballStatus:"close"},function(){setTimeout(function(){t.setState({closeBaseBall:!0})},1e3)})}},{key:"checkVersion",value:function(){var e=(0,h.getBdboxVersion)(),t=e&&e.split(".");return!!(e&&t[0]>=13&&t[1]>=1)}},{key:"checkAndroidVersion",value:function(){var e=(0,h.getBdboxVersion)(),t=e&&e.split(".");return!!(e&&t[0]>=13&&t[1]>=7)}},{key:"fetchWidgetData",value:function(){var e=(0,b.default)("https://basic-service.baidu.com/midplatform/clue/openwidget/list?type=epidemic",{jsonpCallback:"callback"}).then(function(e){return e.json()});return new Promise(function(t,a){e.then(function(e){0===e.code&&e.data&&e.data.list?t(e.data.list[0].WidgetInfo&&e.data.list[0].WidgetInfo):a(new Error("dataErr"))})})}},{key:"handleOpenWidget",value:function(){var e=this;m.default.canIUse("search.hasOpenWidget")?this.fetchWidgetData().then(function(t){var a=t.openWidgetId;e.setState({openWidgetId:a});var i=(0,h.getUrlCityInfo)();m.default.search.hasOpenWidget({ignoreConfig:!0,config:{params:{province:i.province,city:i.city}},openWidgetId:a,success:function(t){0===t.status&&t.data.installed||t.data.unsupported||(e.setState({hasOpenWidget:!1}),e.sendShowWidget())},fail:function(){e.setState({hasOpenWidget:!1}),e.sendShowWidget()}})}).catch(function(t){e.setState({hasOpenWidget:!1}),e.sendShowWidget()}):(this.setState({hasOpenWidget:!1}),this.sendShowWidget())}},{key:"sendShowWidget",value:function(){this.state.showComponent&&!this.state.closeBaseBall&&window._CaptainLog&&window._CaptainLog.send({act:"widget_ball_show"})}}]),t}(l.Component)},579:function(e,t,a){var i=a(580);"string"==typeof i&&(i=[[e.i,i,""]]);a(447)(i,{});i.locals&&(e.exports=i.locals)},580:function(e,t,a){t=e.exports=a(446)(),t.push([e.i,'.VirusBaseBall_1-116-1_1mTnkd{width:10.69rem;height:3.1rem;background-color:#f60;position:fixed;right:0;bottom:24px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;z-index:99999999;padding-left:.3rem;box-sizing:border-box;border-radius:1.55rem 0 0 1.55rem;background-image:-webkit-linear-gradient(306deg,#22c8cc,#10aeb5 72%);background-image:linear-gradient(144deg,#22c8cc,#10aeb5 72%);box-shadow:0 5px 15px 0 rgba(16,174,181,.3);-webkit-transform:translateZ(0);transform:translateZ(0);overflow:hidden}.VirusBaseBall_1-116-1_1mTnkd.VirusBaseBall_1-116-1_1FPYs7{-webkit-transform:translateX(7.6rem);-ms-transform:translateX(7.6rem);transform:translateX(7.6rem);-webkit-transition:all .32s ease;transition:all .32s ease}.VirusBaseBall_1-116-1_1mTnkd.VirusBaseBall_1-116-1_10_jDZ{-webkit-transform:translateX(0);-ms-transform:translateX(0);transform:translateX(0);-webkit-transition:all .32s ease;transition:all .32s ease}.VirusBaseBall_1-116-1_1mTnkd.VirusBaseBall_1-116-1_2p2Gez{-webkit-transform:translateX(11rem);-ms-transform:translateX(11rem);transform:translateX(11rem);-webkit-transition:all .32s ease;transition:all .32s ease}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_3qebLi{width:2.6rem;height:2.6rem;background:url("https://ss2.baidu.com/6ONYsjip0QIZ8tyhnq/it/u=2777078597,1019173071&fm=179&app=35&f=PNG?w=136&h=136&s=6BC153229C677280166ED6400300E0F8") no-repeat 50%;background-size:100% 100%;border-radius:50%}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_ZnTMM-{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;margin-left:-5px}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_ZnTMM- .VirusBaseBall_1-116-1_3K_SpZ{font-size:.98rem;color:#fff;font-weight:600}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_ZnTMM- .VirusBaseBall_1-116-1_1ekJLW{font-size:.65rem;color:#fff}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_1FWeGz{width:1rem;height:100%;padding-right:.6rem;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-tap-highlight-color:rgba(255,255,255,0)}.VirusBaseBall_1-116-1_1mTnkd .VirusBaseBall_1-116-1_1FWeGz .VirusBaseBall_1-116-1_2p61tJ{width:.8rem;height:.8rem;background:url("https://ss0.baidu.com/6ONWsjip0QIZ8tyhnq/it/u=345661371,1843024182&fm=179&app=35&f=PNG?w=42&h=42&s=09E07A229AC784944815A1990300C091") no-repeat 50%;background-size:100% 100%}',""]),t.locals={"base-ball":"VirusBaseBall_1-116-1_1mTnkd",baseBall:"VirusBaseBall_1-116-1_1mTnkd","ball-hide":"VirusBaseBall_1-116-1_1FPYs7",ballHide:"VirusBaseBall_1-116-1_1FPYs7","ball-show":"VirusBaseBall_1-116-1_10_jDZ",ballShow:"VirusBaseBall_1-116-1_10_jDZ","close-ball":"VirusBaseBall_1-116-1_2p2Gez",closeBall:"VirusBaseBall_1-116-1_2p2Gez",logo:"VirusBaseBall_1-116-1_3qebLi",content:"VirusBaseBall_1-116-1_ZnTMM-",title:"VirusBaseBall_1-116-1_3K_SpZ",subTitle:"VirusBaseBall_1-116-1_1ekJLW",close:"VirusBaseBall_1-116-1_1FWeGz",icon:"VirusBaseBall_1-116-1_2p61tJ"}}});